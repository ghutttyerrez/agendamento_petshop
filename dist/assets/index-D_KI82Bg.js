(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function s(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(r){if(r.ep)return;r.ep=!0;const c=s(r);fetch(r.href,c)}})();var J=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function K(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Q={exports:{}},ot;function at(){return ot||(ot=1,function(t,f){(function(s,a){t.exports=a()})(J,function(){var s=1e3,a=6e4,r=36e5,c="millisecond",u="second",g="minute",v="hour",M="day",H="week",T="month",D="quarter",w="year",$="date",i="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,L={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(l){var o=["th","st","nd","rd"],e=l%100;return"["+l+(o[(e-20)%10]||o[e]||o[0])+"]"}},_=function(l,o,e){var d=String(l);return!d||d.length>=o?l:""+Array(o+1-d.length).join(e)+l},C={s:_,z:function(l){var o=-l.utcOffset(),e=Math.abs(o),d=Math.floor(e/60),n=e%60;return(o<=0?"+":"-")+_(d,2,"0")+":"+_(n,2,"0")},m:function l(o,e){if(o.date()<e.date())return-l(e,o);var d=12*(e.year()-o.year())+(e.month()-o.month()),n=o.clone().add(d,T),m=e-n<0,h=o.clone().add(d+(m?-1:1),T);return+(-(d+(e-n)/(m?n-h:h-n))||0)},a:function(l){return l<0?Math.ceil(l)||0:Math.floor(l)},p:function(l){return{M:T,y:w,w:H,d:M,D:$,h:v,m:g,s:u,ms:c,Q:D}[l]||String(l||"").toLowerCase().replace(/s$/,"")},u:function(l){return l===void 0}},S="en",E={};E[S]=L;var z="$isDayjsObject",U=function(l){return l instanceof R||!(!l||!l[z])},A=function l(o,e,d){var n;if(!o)return S;if(typeof o=="string"){var m=o.toLowerCase();E[m]&&(n=m),e&&(E[m]=e,n=m);var h=o.split("-");if(!n&&h.length>1)return l(h[0])}else{var b=o.name;E[b]=o,n=b}return!d&&n&&(S=n),n||!d&&S},O=function(l,o){if(U(l))return l.clone();var e=typeof o=="object"?o:{};return e.date=l,e.args=arguments,new R(e)},y=C;y.l=A,y.i=U,y.w=function(l,o){return O(l,{locale:o.$L,utc:o.$u,x:o.$x,$offset:o.$offset})};var R=function(){function l(e){this.$L=A(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[z]=!0}var o=l.prototype;return o.parse=function(e){this.$d=function(d){var n=d.date,m=d.utc;if(n===null)return new Date(NaN);if(y.u(n))return new Date;if(n instanceof Date)return new Date(n);if(typeof n=="string"&&!/Z$/i.test(n)){var h=n.match(p);if(h){var b=h[2]-1||0,x=(h[7]||"0").substring(0,3);return m?new Date(Date.UTC(h[1],b,h[3]||1,h[4]||0,h[5]||0,h[6]||0,x)):new Date(h[1],b,h[3]||1,h[4]||0,h[5]||0,h[6]||0,x)}}return new Date(n)}(e),this.init()},o.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},o.$utils=function(){return y},o.isValid=function(){return this.$d.toString()!==i},o.isSame=function(e,d){var n=O(e);return this.startOf(d)<=n&&n<=this.endOf(d)},o.isAfter=function(e,d){return O(e)<this.startOf(d)},o.isBefore=function(e,d){return this.endOf(d)<O(e)},o.$g=function(e,d,n){return y.u(e)?this[d]:this.set(n,e)},o.unix=function(){return Math.floor(this.valueOf()/1e3)},o.valueOf=function(){return this.$d.getTime()},o.startOf=function(e,d){var n=this,m=!!y.u(d)||d,h=y.p(e),b=function(F,X){var P=y.w(n.$u?Date.UTC(n.$y,X,F):new Date(n.$y,X,F),n);return m?P:P.endOf(M)},x=function(F,X){return y.w(n.toDate()[F].apply(n.toDate("s"),(m?[0,0,0,0]:[23,59,59,999]).slice(X)),n)},I=this.$W,j=this.$M,q=this.$D,W="set"+(this.$u?"UTC":"");switch(h){case w:return m?b(1,0):b(31,11);case T:return m?b(1,j):b(0,j+1);case H:var N=this.$locale().weekStart||0,Z=(I<N?I+7:I)-N;return b(m?q-Z:q+(6-Z),j);case M:case $:return x(W+"Hours",0);case v:return x(W+"Minutes",1);case g:return x(W+"Seconds",2);case u:return x(W+"Milliseconds",3);default:return this.clone()}},o.endOf=function(e){return this.startOf(e,!1)},o.$set=function(e,d){var n,m=y.p(e),h="set"+(this.$u?"UTC":""),b=(n={},n[M]=h+"Date",n[$]=h+"Date",n[T]=h+"Month",n[w]=h+"FullYear",n[v]=h+"Hours",n[g]=h+"Minutes",n[u]=h+"Seconds",n[c]=h+"Milliseconds",n)[m],x=m===M?this.$D+(d-this.$W):d;if(m===T||m===w){var I=this.clone().set($,1);I.$d[b](x),I.init(),this.$d=I.set($,Math.min(this.$D,I.daysInMonth())).$d}else b&&this.$d[b](x);return this.init(),this},o.set=function(e,d){return this.clone().$set(e,d)},o.get=function(e){return this[y.p(e)]()},o.add=function(e,d){var n,m=this;e=Number(e);var h=y.p(d),b=function(j){var q=O(m);return y.w(q.date(q.date()+Math.round(j*e)),m)};if(h===T)return this.set(T,this.$M+e);if(h===w)return this.set(w,this.$y+e);if(h===M)return b(1);if(h===H)return b(7);var x=(n={},n[g]=a,n[v]=r,n[u]=s,n)[h]||1,I=this.$d.getTime()+e*x;return y.w(I,this)},o.subtract=function(e,d){return this.add(-1*e,d)},o.format=function(e){var d=this,n=this.$locale();if(!this.isValid())return n.invalidDate||i;var m=e||"YYYY-MM-DDTHH:mm:ssZ",h=y.z(this),b=this.$H,x=this.$m,I=this.$M,j=n.weekdays,q=n.months,W=n.meridiem,N=function(X,P,B,V){return X&&(X[P]||X(d,m))||B[P].slice(0,V)},Z=function(X){return y.s(b%12||12,X,"0")},F=W||function(X,P,B){var V=X<12?"AM":"PM";return B?V.toLowerCase():V};return m.replace(Y,function(X,P){return P||function(B){switch(B){case"YY":return String(d.$y).slice(-2);case"YYYY":return y.s(d.$y,4,"0");case"M":return I+1;case"MM":return y.s(I+1,2,"0");case"MMM":return N(n.monthsShort,I,q,3);case"MMMM":return N(q,I);case"D":return d.$D;case"DD":return y.s(d.$D,2,"0");case"d":return String(d.$W);case"dd":return N(n.weekdaysMin,d.$W,j,2);case"ddd":return N(n.weekdaysShort,d.$W,j,3);case"dddd":return j[d.$W];case"H":return String(b);case"HH":return y.s(b,2,"0");case"h":return Z(1);case"hh":return Z(2);case"a":return F(b,x,!0);case"A":return F(b,x,!1);case"m":return String(x);case"mm":return y.s(x,2,"0");case"s":return String(d.$s);case"ss":return y.s(d.$s,2,"0");case"SSS":return y.s(d.$ms,3,"0");case"Z":return h}return null}(X)||h.replace(":","")})},o.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},o.diff=function(e,d,n){var m,h=this,b=y.p(d),x=O(e),I=(x.utcOffset()-this.utcOffset())*a,j=this-x,q=function(){return y.m(h,x)};switch(b){case w:m=q()/12;break;case T:m=q();break;case D:m=q()/3;break;case H:m=(j-I)/6048e5;break;case M:m=(j-I)/864e5;break;case v:m=j/r;break;case g:m=j/a;break;case u:m=j/s;break;default:m=j}return n?m:y.a(m)},o.daysInMonth=function(){return this.endOf(T).$D},o.$locale=function(){return E[this.$L]},o.locale=function(e,d){if(!e)return this.$L;var n=this.clone(),m=A(e,d,!0);return m&&(n.$L=m),n},o.clone=function(){return y.w(this.$d,this)},o.toDate=function(){return new Date(this.valueOf())},o.toJSON=function(){return this.isValid()?this.toISOString():null},o.toISOString=function(){return this.$d.toISOString()},o.toString=function(){return this.$d.toUTCString()},l}(),nt=R.prototype;return O.prototype=nt,[["$ms",c],["$s",u],["$m",g],["$H",v],["$W",M],["$M",T],["$y",w],["$D",$]].forEach(function(l){nt[l[1]]=function(o){return this.$g(o,l[0],l[1])}}),O.extend=function(l,o){return l.$i||(l(o,R,O),l.$i=!0),O},O.locale=A,O.isDayjs=U,O.unix=function(l){return O(1e3*l)},O.en=E[S],O.Ls=E,O.p={},O})}(Q)),Q.exports}var dt=at();const k=K(dt);var ft={exports:{}};(function(t,f){(function(s,a){t.exports=a(at())})(J,function(s){function a(u){return u&&typeof u=="object"&&"default"in u?u:{default:u}}var r=a(s),c={name:"pt-br",weekdays:"domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sáb".split("_"),weekdaysMin:"Do_2ª_3ª_4ª_5ª_6ª_Sá".split("_"),months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),ordinal:function(u){return u+"º"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},relativeTime:{future:"em %s",past:"há %s",s:"poucos segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"}};return r.default.locale(c,null,!0),c})})(ft);var st={exports:{}};(function(t,f){(function(s,a){t.exports=a()})(J,function(){return function(s,a,r){s=s||{};var c=a.prototype,u={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function g(M,H,T,D){return c.fromToBase(M,H,T,D)}r.en.relativeTime=u,c.fromToBase=function(M,H,T,D,w){for(var $,i,p,Y=T.$locale().relativeTime||u,L=s.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],_=L.length,C=0;C<_;C+=1){var S=L[C];S.d&&($=D?r(M).diff(T,S.d,!0):T.diff(M,S.d,!0));var E=(s.rounding||Math.round)(Math.abs($));if(p=$>0,E<=S.r||!S.r){E<=1&&C>0&&(S=L[C-1]);var z=Y[S.l];w&&(E=w(""+E)),i=typeof z=="string"?z.replace("%d",E):z(E,H,S.l,p);break}}if(H)return i;var U=p?Y.future:Y.past;return typeof U=="function"?U(i):U.replace("%s",i)},c.to=function(M,H){return g(M,H,this,!0)},c.from=function(M,H){return g(M,H,this)};var v=function(M){return M.$u?r.utc():r()};c.toNow=function(M){return this.to(v(this),M)},c.fromNow=function(M){return this.from(v(this),M)}}})})(st);var lt=st.exports;const mt=K(lt);var ut={exports:{}};(function(t,f){(function(s,a){t.exports=a()})(J,function(){var s="minute",a=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(c,u,g){var v=u.prototype;g.utc=function(i){var p={date:i,utc:!0,args:arguments};return new u(p)},v.utc=function(i){var p=g(this.toDate(),{locale:this.$L,utc:!0});return i?p.add(this.utcOffset(),s):p},v.local=function(){return g(this.toDate(),{locale:this.$L,utc:!1})};var M=v.parse;v.parse=function(i){i.utc&&(this.$u=!0),this.$utils().u(i.$offset)||(this.$offset=i.$offset),M.call(this,i)};var H=v.init;v.init=function(){if(this.$u){var i=this.$d;this.$y=i.getUTCFullYear(),this.$M=i.getUTCMonth(),this.$D=i.getUTCDate(),this.$W=i.getUTCDay(),this.$H=i.getUTCHours(),this.$m=i.getUTCMinutes(),this.$s=i.getUTCSeconds(),this.$ms=i.getUTCMilliseconds()}else H.call(this)};var T=v.utcOffset;v.utcOffset=function(i,p){var Y=this.$utils().u;if(Y(i))return this.$u?0:Y(this.$offset)?T.call(this):this.$offset;if(typeof i=="string"&&(i=function(S){S===void 0&&(S="");var E=S.match(a);if(!E)return null;var z=(""+E[0]).match(r)||["-",0,0],U=z[0],A=60*+z[1]+ +z[2];return A===0?0:U==="+"?A:-A}(i),i===null))return this;var L=Math.abs(i)<=16?60*i:i,_=this;if(p)return _.$offset=L,_.$u=i===0,_;if(i!==0){var C=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(_=this.local().add(L+C,s)).$offset=L,_.$x.$localOffset=C}else _=this.utc();return _};var D=v.format;v.format=function(i){var p=i||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return D.call(this,p)},v.valueOf=function(){var i=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*i},v.isUTC=function(){return!!this.$u},v.toISOString=function(){return this.toDate().toISOString()},v.toString=function(){return this.toDate().toUTCString()};var w=v.toDate;v.toDate=function(i){return i==="s"&&this.$offset?g(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():w.call(this)};var $=v.diff;v.diff=function(i,p,Y){if(i&&this.$u===i.$u)return $.call(this,i,p,Y);var L=this.local(),_=g(i).local();return $.call(L,_,p,Y)}}})})(ut);var ht=ut.exports;const vt=K(ht);var ct={exports:{}};(function(t,f){(function(s,a){t.exports=a()})(J,function(){var s={year:0,month:1,day:2,hour:3,minute:4,second:5},a={};return function(r,c,u){var g,v=function(D,w,$){$===void 0&&($={});var i=new Date(D),p=function(Y,L){L===void 0&&(L={});var _=L.timeZoneName||"short",C=Y+"|"+_,S=a[C];return S||(S=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:Y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:_}),a[C]=S),S}(w,$);return p.formatToParts(i)},M=function(D,w){for(var $=v(D,w),i=[],p=0;p<$.length;p+=1){var Y=$[p],L=Y.type,_=Y.value,C=s[L];C>=0&&(i[C]=parseInt(_,10))}var S=i[3],E=S===24?0:S,z=i[0]+"-"+i[1]+"-"+i[2]+" "+E+":"+i[4]+":"+i[5]+":000",U=+D;return(u.utc(z).valueOf()-(U-=U%1e3))/6e4},H=c.prototype;H.tz=function(D,w){D===void 0&&(D=g);var $,i=this.utcOffset(),p=this.toDate(),Y=p.toLocaleString("en-US",{timeZone:D}),L=Math.round((p-new Date(Y))/1e3/60),_=15*-Math.round(p.getTimezoneOffset()/15)-L;if(!Number(_))$=this.utcOffset(0,w);else if($=u(Y,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(_,!0),w){var C=$.utcOffset();$=$.add(i-C,"minute")}return $.$x.$timezone=D,$},H.offsetName=function(D){var w=this.$x.$timezone||u.tz.guess(),$=v(this.valueOf(),w,{timeZoneName:D}).find(function(i){return i.type.toLowerCase()==="timezonename"});return $&&$.value};var T=H.startOf;H.startOf=function(D,w){if(!this.$x||!this.$x.$timezone)return T.call(this,D,w);var $=u(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return T.call($,D,w).tz(this.$x.$timezone,!0)},u.tz=function(D,w,$){var i=$&&w,p=$||w||g,Y=M(+u(),p);if(typeof D!="string")return u(D).tz(p);var L=function(E,z,U){var A=E-60*z*1e3,O=M(A,U);if(z===O)return[A,z];var y=M(A-=60*(O-z)*1e3,U);return O===y?[A,O]:[E-60*Math.min(O,y)*1e3,Math.max(O,y)]}(u.utc(D,i).valueOf(),Y,p),_=L[0],C=L[1],S=u(_).utcOffset(C);return S.$x.$timezone=p,S},u.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},u.tz.setDefault=function(D){g=D}}})})(ct);var $t=ct.exports;const pt=K($t);k.extend(mt);k.extend(vt);k.extend(pt);k.locale("pt-br");const yt={baseURL:"http://localhost:3333"},gt=yt.baseURL.replace(/\/$/,"");async function G(t,f={}){const s=`${gt}${t.startsWith("/")?t:`/${t}`}`,a=await fetch(s,{headers:{"Content-Type":"application/json",...f.headers||{}},...f});if(!a.ok){const c=await a.text().catch(()=>"");throw new Error(`HTTP ${a.status} ${a.statusText} - ${c}`)}return(a.headers.get("content-type")||"").includes("application/json")?a.json():null}const et={fetchJson:G,get:t=>G(t,{method:"GET"}),post:(t,f)=>G(t,{method:"POST",body:JSON.stringify(f)}),del:t=>G(t,{method:"DELETE"})};async function Mt(t){try{return!t.dateTime&&t.date&&t.hour&&(t.dateTime=k(`${t.date} ${t.hour}`,"YYYY-MM-DD HH:mm").toISOString()),await et.post("/schedules",t)}catch(f){throw console.error("Erro ao enviar o agendamento:",f),f}}async function Dt({id:t}){if(!t)return console.error("cancelSchedule: id inválido",t),!1;try{return await et.del(`/schedules/${t}`),!0}catch(f){return console.error("Erro ao cancelar o agendamento:",f),!1}}function St(t){if(!t){console.error("Schedule não fornecido");return}if(!t.dateTime){console.error("Schedule sem dateTime:",t);return}const f=k(t.dateTime).format("HH:mm"),s=parseInt(f.split(":")[0],10);let a;s>=6&&s<12?a="morning":s>=12&&s<18?a="afternoon":a="night";const r=document.getElementById(a);if(!r){console.error(`Elemento com ID "${a}" não encontrado`);return}const c=r.querySelector(".content")||r,u=document.createElement("ul");u.setAttribute("data-id",t.id),u.setAttribute("role","list"),u.innerHTML=`
    <li class="title">
      <span>${f}</span>
      <span>${t.pet||"Pet não informado"}<small> / ${t.tutor||"Tutor não informado"}</small></span>
    </li>
    <p>${t.service||"Serviço não informado"}</p>
    <button id="remove-button" class="remove-button" data-id="${t.id}">Remover agendamento</button>
  `,c.appendChild(u);const g=u.querySelector(".remove-button");g&&g.addEventListener("click",async()=>{try{await Dt({id:t.id})&&u.remove()}catch(v){console.error("Erro ao remover no servidor:",v)}})}async function rt({date:t}){try{const f=await et.get("/schedules");if(!Array.isArray(f))return console.error("Resposta da API não é um array:",f),[];const s=k(t),a=f.filter(r=>r?r.dateTime?k(r.dateTime).isSame(s,"day"):r.date?k(r.date).isSame(s,"day"):!1:!1);return["morning","afternoon","night"].forEach(r=>{const c=document.getElementById(r);if(!c)return;(c.querySelector(".content")||c).querySelectorAll('ul[role="list"]').forEach(g=>g.remove())}),a.forEach(r=>{r&&r.dateTime&&St(r)}),a}catch(f){return console.error("Erro ao buscar agendamentos:",f),[]}}function tt(t){return new Promise(f=>{const s=document.querySelector(t);if(s){f(s);return}const a=new MutationObserver(()=>{const r=document.querySelector(t);r&&(a.disconnect(),f(r))});a.observe(document.body,{childList:!0,subtree:!0})})}async function wt(){const t=await tt("form"),f=await tt("#hour"),s=await tt("#phone"),a=k().format("HH:mm");f.value=a,f.min=a,document.querySelectorAll("input[type='date']").forEach(c=>{const u=k().format("YYYY-MM-DD");c.value=u,c.min=u,c.addEventListener("change",()=>{const g=k().startOf("day");k(c.value).isBefore(g)?f.min="00:00":f.min=a})}),s.addEventListener("input",()=>{let c=s.value.replace(/\D/g,"");c=c.slice(0,11),c.length<=10?s.value=c.replace(/^(\d{2})(\d{4})(\d{0,4})$/,"($1) $2-$3").trim().replace(/[-\s]+$/,""):s.value=c.replace(/^(\d{2})(\d{5})(\d{4})$/,"($1) $2-$3"),/^\(\d{2}\) \d{4,5}-\d{4}$/.test(s.value)?s.setCustomValidity(""):s.setCustomValidity("Telefone inválido. Formato esperado: (XX) XXXX-XXXX ou (XX) XXXXX-XXXX")}),t.addEventListener("submit",_t)}const bt=()=>{const t=document.getElementById("hour");if(!t||!t.value)return k().format("HH:mm");const[f,s]=t.value.split(":"),a=`${String(f).padStart(2,"0")}:${String(s).padStart(2,"0")}`;return t.value=a,a};async function _t(t){var f;t.preventDefault();try{const s=t.target,a=new FormData(s),r={tutor:a.get("tutor"),pet:a.get("pet"),phone:a.get("phone"),service:a.get("service"),date:a.get("date"),hour:bt()};if(!r.tutor||!r.pet){alert("Por favor, preencha o nome do tutor e do pet.");return}if(!r.service){alert("Por favor, descreva o serviço a ser realizado.");return}if(!r.phone){alert("Por favor, preencha o telefone.");return}if(!r.date||!r.hour){alert("Por favor, preencha a data e hora do agendamento.");return}r.id=crypto.randomUUID();const c=k(`${r.date} ${r.hour}`,"YYYY-MM-DD HH:mm").toISOString();r.dateTime=c,await Mt(r),window.closeModal&&window.closeModal();const u=((f=document.querySelector('.header input[type="date"]'))==null?void 0:f.value)||k().format("YYYY-MM-DD");await rt({date:u}),alert("Agendamento criado com sucesso!")}catch(s){console.error("Erro ao enviar o formulário:",s),alert("Ocorreu um erro ao enviar o formulário. Por favor, tente novamente.")}}document.addEventListener("DOMContentLoaded",wt);function Ot(){const t=document.getElementById("form-schedule"),f=document.getElementById("new-schedule"),s=document.getElementById("closeButton"),a=document.getElementById("close-modal");function r(){t.classList.remove("none"),document.body.style.overflow="hidden";const u=document.querySelector("#form-schedule input[name='date']");if(u){const v=new Date().toISOString().split("T")[0];u.value=v}t.setAttribute("role","dialog"),t.setAttribute("aria-modal","true");const g=t.querySelector("input, textarea, select, button");g==null||g.focus()}function c(){t.classList.add("none"),document.body.style.overflow="",t.reset(),t.removeAttribute("role"),t.removeAttribute("aria-modal")}f==null||f.addEventListener("click",r),s==null||s.addEventListener("click",c),a==null||a.addEventListener("click",c),t==null||t.addEventListener("click",u=>{u.target===t&&c()}),document.addEventListener("keydown",u=>{u.key==="Escape"&&!t.classList.contains("none")&&c()}),window.openModal=r,window.closeModal=c}document.addEventListener("DOMContentLoaded",()=>{Ot()});function Tt(t,f=300){let s;return function(...r){clearTimeout(s),s=setTimeout(()=>t.apply(this,r),f)}}document.addEventListener("DOMContentLoaded",async()=>{const t=k().format("YYYY-MM-DD");try{await rt({date:t})}catch(f){console.error("Erro ao carregar agendamentos:",f)}});const it=document.querySelector(".header input[type='date']");it&&it.addEventListener("change",Tt(async t=>{const f=t.target.value;try{await rt({date:f})}catch(s){console.error("Erro ao filtrar agendamentos por data:",s)}},250));
